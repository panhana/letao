# 乐淘项目总结

## 大量运用了ajax请求跟mui框架

```java
mui框架能有的就直接复制，没有的看源代码f2 直接在控制台拿
```

### **关于正则的判断**

**正则盾哥写的博客**：https://blog.csdn.net/maodun_2013/article/details/93736597

**关于正则常用的基本判断：**

列：  验证手机号码的正则表达式

​      var teg = /^1(3|4|5|7|8)\d{9}$/

​        if (!teg.test(mobile)) {

​            alert("请输入正确的手机号格式")

​            return

​        }

### 一些表达式：

1. $trim(内容)   去除字符串两端空格 列：  jq.trim($("[name=username]").val())
2. readonly  用于表单配合组件做三级联动   只读不选 不能被选中输入内容
3.  localStorage.**setItem**它的意思是给前面那个变量属性赋key赋值，没有就添加有就覆盖



### **注意点：**

1. 全局下定义了的var变量 在函数中 再次习惯性再var一次。
2. 同级情况下 手动获取input框的name属性 var xxx= $("[name=xxx]").val()
3. 写东西的时候看清楚，经常写到一些点击事件里面或一些if判断后面 这样就不容易找错 东西也拿不到
4. 使用框架，在书写样式的时候，可能有些元素，框架有默认样式，这就要从控制台看，然后删除
5. 登录拦截判断后跳转到登录页面，登录页面不需要引入那个文件，不然无线死循环跳
6. 在跟tr td做模板拼接 循环的时候，如果渲染到页面，有部分样式丢了 没有那个线分割是因为在表格中默认有个tbody  跟thead 把它们包含，在写html代码时，**浏览器会自动给我们添加，而模板引擎不会**，所以添加个tbody就行了

1. - [ ] ### **在做后端管理页面的图片上传的时候注意的几个点：**

   - [ ] **需要首先在当前需要图片上传的页面引入这几个jq文件  且按这样的顺序引入**

     **jquery.ui.widget.js**

   - **jquery.iframe-transport.js**

   - **jquery.fileupload.js**

   - 

     **然后在js页面调用它已经封装好了的函数**

      **//实现图片上传  这里复制的是一次上传多张图 push到数组里面**

     ​    **$('#fileUpload').fileupload({**

     ​        **dataType: 'json',**

     ​        **done: function(e, data) {**

     ​            **pic.push(data.result);**

     ​        **}**

     ​    **});**

     **然后再html页面中 input需要传的一些参数**

        **<input type="file" accept="image/jpeg" name="pic1" multiple data-url="/product/addProductPic" id="fileUpload">**

     

     

   

      


### 项目中部分逻辑点：

- 做页面跳转的时候判断是否登录，判断完成后点击后还是有一瞬间看到原来的页面，这时候就要把实现代码**放到入口函数外面来**，代码从上往下执行 ajax异步函数还是需要时间，还是会先执行入口函数里面，所以还得改成同步，同步的参数，接口文档应该有
- 点击按价格排序那里 先声明一个变量默认是1，然后赋值一个三元表达式 列：  **price = price == 1 ? 2 : 1**;  再次点击变成2，来回切换
- 移动端click点击事件有延迟，这里采用的是tap轻敲事件 **mui框架封装的**
- 在做编辑跟添加在同一个页面时，**需要在跳转链接后面添加一个key在地址栏** ，这样才方便到跳转页面区分是添加还是编辑  这个项目添加跟编辑ajax是一样，就编辑多个参数id，这样在ajax请求前面把接口地址url跟data传的参数拿出来   在判断是编辑的时候 给data添一个id就行了
- 一般跨页面传递把数据带过去 常见的要么是**地址栏传参**，要么就存储在**本地储存**
- 给编辑按钮做点击事件的时候，要获取当前选定的对象，然后有个ajax请求获取当前的收货地址，只不过是所有的 然后给编辑写个data-id 获取当前id    **然后这里要记得循环获取的整个所有的数组**   if判断id相等的   这样判断出来的就是你当前点击选定的对象 再存贮在本地储存里面就好了
- $(this).serialize(); 获取的是一个字符串 
- $(this).serializeArray()[1].value  这样就是把获取到表单name成了一个数组形式，然后就可以通过这样判断value是否为空
- 不管是pc端还是移动端  **登录拦截**是少不了的，没登陆就访问不了有些管理页面，一般解决方法就是在公共样式入口函数外面调用文档里查询是否登陆的接口，然后打印出来进行判断如果存在error或=400，就跳转到登录页面，由于ajax是异步，需要添加个参数改为同步，async:false
- 比如做后台管理user页面中的点击更改禁用启用按钮   成功的话就要刷新页面，那样就造成很不好的客户体验，解决方案是： 页面的用户数据是动态直接发ajax请求获取的，把它封装成一个函数 页面一进来就调用一次，然后到了点击按钮那就不用刷新页面，而是再调用一次请求页面数据的ajax封装函数
- 



### 乐淘最后需要的一些东西：数据库是连接了一个 Wampserver64 的东西  把乐淘文件件有个初始化文件丢进去数据库默认就有数据了  开始下载不下来，配置了一个MSVBCRT.AIO.2019.06.30.X64.exe  就可以了



